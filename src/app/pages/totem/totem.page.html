<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Totem - Retire sua Senha</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/painel">
        <ion-icon slot="start" name="tv"></ion-icon>
        <ion-label>Painel</ion-label>
      </ion-button>
      <ion-button routerLink="/atendente">
        <ion-icon slot="start" name="person"></ion-icon>
        <ion-label>Atendente</ion-label>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="totem-container">
    <ion-card class="info-card">
      <ion-card-header>
        <ion-card-title>Bem-vindo ao Sistema de Senhas</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>Selecione o tipo de atendimento desejado:</p>
      </ion-card-content>
    </ion-card>

    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="4">
          <ion-button 
            expand="block" 
            size="large"
            color="danger"
            (click)="emit('SP')"
            class="ticket-button">
            <ion-icon name="alert-circle" slot="start"></ion-icon>
            Senha Prioritária (SP)
          </ion-button>
          <ion-note class="ion-text-center">
            <small>Para atendimento prioritário</small>
          </ion-note>
        </ion-col>

        <ion-col size="12" size-md="4">
          <ion-button 
            expand="block" 
            size="large"
            color="primary"
            (click)="emit('SG')"
            class="ticket-button">
            <ion-icon name="people" slot="start"></ion-icon>
            Senha Geral (SG)
          </ion-button>
          <ion-note class="ion-text-center">
            <small>Atendimento geral</small>
          </ion-note>
        </ion-col>

        <ion-col size="12" size-md="4">
          <ion-button 
            expand="block" 
            size="large"
            color="success"
            (click)="emit('SE')"
            class="ticket-button">
            <ion-icon name="document-text" slot="start"></ion-icon>
            Retirada de Exames (SE)
          </ion-button>
          <ion-note class="ion-text-center">
            <small>Retirada de exames prontos</small>
          </ion-note>
        </ion-col>
      </ion-row>
    </ion-grid>

    <ion-card *ngIf="lastTicket" class="ticket-card">
      <ion-card-header>
        <ion-card-title class="ion-text-center">
          <ion-icon name="ticket" color="primary"></ion-icon>
          Sua Senha
        </ion-card-title>
      </ion-card-header>
      <ion-card-content class="ion-text-center">
        <h1 class="ticket-number">{{ lastTicket.id }}</h1>
        <p>
          <ion-badge [color]="getTicketColor(lastTicket.type)">
            {{ getTicketTypeName(lastTicket.type) }}
          </ion-badge>
        </p>
        <p class="ticket-info">
          <ion-icon name="time"></ion-icon>
          Emitida em: {{ lastTicket.issuedAt | date: 'dd/MM/yyyy HH:mm' }}
        </p>
        <p class="ticket-info">
          <ion-icon name="hourglass"></ion-icon>
          Tempo médio de espera: {{ getAverageTime(lastTicket.type) }}
        </p>
      </ion-card-content>
    </ion-card>

    <ion-card class="info-card" *ngIf="!lastTicket">
      <ion-card-content class="ion-text-center">
        <ion-icon name="information-circle" size="large" color="medium"></ion-icon>
        <p>Toque em um dos botões acima para emitir sua senha</p>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-title class="ion-text-center" size="small">
      Horário de atendimento: 07:00 às 17:00
    </ion-title>
  </ion-toolbar>
</ion-footer>